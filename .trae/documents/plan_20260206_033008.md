收到，您提供了非常详细的**可灵 (Kling AI)** API 文档。

### 关键信息提取
*   **认证方式**: **JWT (JSON Web Token)**。
    *   您有 `Access Key (AK)` 和 `Secret Key (SK)`。
    *   需要使用 AK/SK 生成一个 JWT Token，放入 `Authorization: Bearer <token>` 头中。
    *   **注意**: 官方文档通常会提供一个生成 Token 的算法（通常涉及 HmacSHA256 签名）。由于您提供的文档没有包含具体的 Token 生成算法部分（只提到了“鉴权信息，参考接口鉴权”），我将假设标准的 JWT 生成逻辑（使用 `jsonwebtoken` 库），或者如果需要特定的签名逻辑，我可能需要先实现一个标准的 AK/SK 转 JWT 的逻辑。
    *   **假设**: 鉴权逻辑通常是 `encode({iss: AK, exp: ...}, SK)`。
*   **API Endpoints**:
    *   生成: `POST https://api.klingai.com/v1/images/generations` (假设域名是这个，因为文档只写了路径，但响应示例里有 `h1.inkwai.com`，通常 API 域名是 `api.klingai.com` 或 `api.kling.kuaishou.com`。我会先用 `api.klingai.com` 作为默认值，您可以在环境变量中覆盖)。
    *   查询: `GET https://api.klingai.com/v1/images/generations/{task_id}`
*   **Payload**:
    *   `model_name`: `kling-v1` (默认)
    *   `prompt`: 必填
    *   `aspect_ratio`: `16:9` (默认)

### 实施计划

#### 1. 安装依赖
*   `jsonwebtoken`: 用于生成鉴权 Token。

#### 2. 实现 Kling Provider (`lib/ai-providers/kling.ts`)
*   **Token 生成**: 实现一个 `generateToken(ak, sk)` 函数。
*   **Generate**: 构造 POST 请求，映射 `model_name`, `prompt`, `aspect_ratio`。
*   **CheckStatus**: 构造 GET 请求，轮询 `task_status: succeed`。

#### 3. 更新配置 (`lib/ai-models.ts`)
*   添加 `kling-v1` 的正式配置。
*   添加 `KLING_AK` 和 `KLING_SK` 环境变量支持。

#### 4. Vercel 环境变量
*   提醒您添加 `KLING_ACCESS_KEY` 和 `KLING_SECRET_KEY`。

请确认是否开始？